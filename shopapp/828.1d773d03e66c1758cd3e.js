(self.webpackChunkshopapp=self.webpackChunkshopapp||[]).push([[828],{3828:(t,i,n)=>{"use strict";n.r(i),n.d(i,{AuthModule:()=>w});var e=n(8583),s=n(5987),r=n(665),o=n(7716),a=n(3521),u=n(7556),c=n(7018),g=n(4514),d=n(7674),h=n(4453),l=n(9374),p=n(6630);function m(t,i){if(1&t&&(o.TgZ(0,"div",16),o._UZ(1,"i",17),o._uU(2),o.qZA()),2&t){const t=o.oxw();o.xp6(2),o.hij("\xa0",t.signInMode?"Ingresar":"Registrarse"," ")}}function f(t,i){1&t&&(o._UZ(0,"i",18),o._uU(1,"\xa0"),o.TgZ(2,"strong"),o._uU(3,"Email"),o.qZA())}function v(t,i){1&t&&(o.TgZ(0,"span",19),o._uU(1," Email invalido "),o.qZA())}function Z(t,i){1&t&&(o._UZ(0,"i",20),o._uU(1,"\xa0"),o.TgZ(2,"strong"),o._uU(3,"Contrase\xf1a"),o.qZA())}function x(t,i){1&t&&(o.TgZ(0,"span",19),o._uU(1," Contrase\xf1a invalida, debe contener al menos 6 caracteres "),o.qZA())}const z=s.Bz.forChild([{path:"",component:(()=>{class t{constructor(t,i,n,e){this._formBuilder=t,this._router=i,this._nzNotificationService=n,this._authService=e,this.signInMode=!0,this.submitted=!1,this.isLoading=!1,this.initForm()}ngOnInit(){}initForm(){this.authForm=this._formBuilder.group({email:[null,[r.kI.required,r.kI.email]],password:[null,[r.kI.required,r.kI.minLength(5)]]})}authSubmit(){this.signInMode?this.signIn():this.signUp()}signIn(){if(this.isLoading=!0,!this.authForm.get("email").value||!this.authForm.get("password").value)return this.isLoading=!1,void this._nzNotificationService.error("\xa1Error!","Credenciales no pueden ser vac\xedas");this._authService.signIn(this.authForm.value).then(t=>{localStorage.setItem("userData",JSON.stringify(t.user)),this.isLoading=!1,this.submitted=!1,this._router.navigate(["products"])}).catch(t=>{this.isLoading=!1,this._nzNotificationService.error("\xa1Error!",t.message||"Ocurri\xf3 un error al ingresar")})}signUp(){if(this.isLoading=!0,this.submitted=!0,!this.authForm.get("email").value||!this.authForm.get("password").value)return this.isLoading=!1,void this._nzNotificationService.error("\xa1Error!","Credenciales no pueden ser vac\xedas");this._authService.signUp(this.authForm.value).then(t=>{this.isLoading=!1,this._nzNotificationService.success("\xa1Operaci\xf3n Existosa!","Registro realizado correctamente"),this.submitted=!1,this.signInMode=!0}).catch(t=>{this.isLoading=!1,this._nzNotificationService.error("\xa1Error!",t.message||"Ocurri\xf3 un error al registrar")})}}return t.\u0275fac=function(i){return new(i||t)(o.Y36(r.qu),o.Y36(s.F0),o.Y36(a.zb),o.Y36(u.e))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-auth"]],decls:23,vars:11,consts:[[1,"container-box"],[1,"content-box"],[1,"shadow","w-100",3,"nzTitle"],["authTitle",""],[3,"formGroup"],[1,"w-100"],[3,"nzPrefix"],["prefixTemplateUser",""],["formControlName","email","nz-input","","type","text",3,"ngClass"],["class","text-danger",4,"ngIf"],[1,"w-100","mt-2"],["prefixTemplatePass",""],["formControlName","password","nz-input","","type","password",3,"ngClass"],["nz-button","","nzType","primary",1,"w-100","mt-2",3,"nzLoading","click"],[1,"w-100","mt-2","text-center"],["nz-button","","nzType","link",3,"click"],[1,"w-100","text-center","text-title"],["nz-icon","","nzType","shop","nzTheme","twotone",1,"icon-title"],["nz-icon","","nzType","user"],[1,"text-danger"],["nz-icon","","nzType","lock"]],template:function(t,i){if(1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"nz-card",2),o.YNc(3,m,3,1,"ng-template",null,3,o.W1O),o.TgZ(5,"form",4),o.TgZ(6,"div",5),o.TgZ(7,"nz-input-group",6),o.YNc(8,f,4,0,"ng-template",null,7,o.W1O),o._UZ(10,"input",8),o.qZA(),o.YNc(11,v,2,0,"span",9),o.qZA(),o.TgZ(12,"div",10),o.TgZ(13,"nz-input-group",6),o.YNc(14,Z,4,0,"ng-template",null,11,o.W1O),o._UZ(16,"input",12),o.qZA(),o.YNc(17,x,2,0,"span",9),o.qZA(),o.TgZ(18,"button",13),o.NdJ("click",function(){return i.authSubmit()}),o._uU(19),o.qZA(),o.TgZ(20,"div",14),o.TgZ(21,"a",15),o.NdJ("click",function(){return i.signInMode=!i.signInMode}),o._uU(22),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.MAs(4),n=o.MAs(9),e=o.MAs(15);o.xp6(2),o.Q6J("nzTitle",t),o.xp6(3),o.Q6J("formGroup",i.authForm),o.xp6(2),o.Q6J("nzPrefix",n),o.xp6(3),o.Q6J("ngClass",i.authForm.get("email").invalid&&i.submitted&&!i.signInMode?"input-invalid":""),o.xp6(1),o.Q6J("ngIf",i.authForm.get("email").invalid&&i.submitted&&!i.signInMode),o.xp6(2),o.Q6J("nzPrefix",e),o.xp6(3),o.Q6J("ngClass",i.authForm.get("password").invalid&&i.submitted&&!i.signInMode?"input-invalid":""),o.xp6(1),o.Q6J("ngIf",i.authForm.get("password").invalid&&i.submitted&&!i.signInMode),o.xp6(1),o.Q6J("nzLoading",i.isLoading),o.xp6(1),o.Oqu(i.signInMode?"Ingresar":"Registrar"),o.xp6(3),o.hij(" ",i.signInMode?"No tienes cuenta? Registrate":"Inicia Sesi\xf3n"," ")}},directives:[c.bd,r._Y,r.JL,r.sg,g.w,d.gB,d.ke,r.Fj,d.Zp,r.JJ,r.u,e.mk,e.O5,h.ix,l.dQ,p.Ls],styles:[".container-box[_ngcontent-%COMP%]{height:100vh;display:flex;justify-content:center;align-items:center}.content-box[_ngcontent-%COMP%]{width:90%}.icon-title[_ngcontent-%COMP%]{font-size:2rem}.text-title[_ngcontent-%COMP%]{font-size:1.3rem}@media (min-width:550px){.content-box[_ngcontent-%COMP%]{width:75%}}@media (min-width:850px){.content-box[_ngcontent-%COMP%]{width:40%}}"]}),t})()}]);var _=n(1841),I=n(6390);const T=[I.nZ9,I.lpg,I.ECR];let w=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[e.ez,z,_.JF,p.PV.forChild(T),r.UX,c.vh,d.o7,h.sL,a.L8]]}),t})()}}]);